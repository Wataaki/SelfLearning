# API. The Good Parts
## 2 章

### API を設計する
必要な機能を洗い出し、画面遷移図に書き出す
機能ごとに必要なAPIを洗い出す
APIとして統合できそうな機能を考える（e.g. 一覧取得と検索機能）

### エンドポイントを考える
覚えやすく、一目でどんな機能を持つかがわかるようにする

#### 短く入力しやすい URI
  - 語句の重複や不要なものは排除する
#### 人間が読んで理解できる URI
  - URIをみただけで、どのようなものかがわかるものが望ましい
  - 略しすぎ英語は良くない（e.g. user => u）
  - ただし、標準化されているものは可 (e.g. japan => jp)
  - 一般的にAPIで良く使われている単語を使う (e.g. find => search)
#### 大文字小文字の混在しない URI
  - 小文字で統一するのがよい
  - しかし、大文字混在でのアクセスをどのように処理するのかは考える
  - 一般的には 404 で返すのが多いかも
#### 改造しやすい URI (Hackable)
  - URIを改修してほかのURIにするのが容易
  - :id など
  - 規則性をもち、ほかのURIを連想しやすい
#### サーバ側のアーキテクチャが反映されていない URI
  - 言語、ディレクトリ構成、システム構成などの情報
  - ユーザには一切必要のない情報
  - 構成を晒すことによって、攻撃を受けるリスクにもなりえる
#### ルールが統一された URI
  - id なんかをクエリパラメータとするのか、URIの一部にするのか

### HTTP メソッドとエンドポイント
GET/POST との関係性は大事
URIとメソッドの関係は、操作するものと操作方法の関係

|メソッド|説明|
|-|-|
|GET|リソースの取得|
|POST|リソースの新規登録|
|PUT|既存リソースの更新|
|DELETE|リソースの削除|
|PATCH|リソースの一部変更|
|HEAD|リソースのメタ情報の取得|

#### GET メソッド
  - URI で指定したリソースを取得する
  - サーバ上のリソースが変更されることはない

#### POST メソッド
  - URI に新しいリソースを送信する
  - サーバ上のリソースが変更される

#### PUT メソッド
  - URI で指定したリソースを置き換えする
  - URI で指定したリソースが存在しない場合、新しく作成することも可能 (非推奨)

#### DELETE メソッド
  - URI のリソースを削除する

#### PATCH メソッド
  - PUT と同様リソースを更新する
  - リソースの一部を更新する際に使用しよう
