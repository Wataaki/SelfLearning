# Route 53
ドメイン管理機能と権威 DNS 機能を持つサービス
ブルーグリーンデプロイメントとの相性がいい

## ドメイン管理
新規ドメインの取得、更新などの手続きができる。
年間利用料は AWS の利用料に含まれる。
自動更新機能があるので、ドメインの更新漏れなどが防げる。

## 権威 DNS
DNS とは、ドメイン名と IP アドレスを変換するシステム
権威 DNS とは、ドメイン名と IP アドレスの変換情報を保持している DNS
変換情報を保持していない DNS (キャッシュ DNS) と区別する言い方

## ホストゾーンとレコード情報

### ホストゾーン
レコード情報の管理単位を表す。通常はドメイン名。

### レコード情報
「www.example.com は IP アドレス 192.168.0.100 である」といった
ドメインと IP アドレスを変換するための情報。
主なレコード情報には下記のものがある。
- A レコード
???
- MX レコード
???
- CHAME レコード
???
- Alias レコード
Route53 で特徴的なレコード
レコードに登録する情報として、 CloudFront, ELB, S3 などの AWS リソース FQDN を指定できる。
CHAME でも同じようなことができるが、 Zone Apex にも登録できるという違いがある。

### Zone Apex
最上位ドメインのこと (Route53 の場合はホストゾーンのこと)

## トラフィックルーティング
名前解決の問い合わせに対し、応答を 7 種類に分けるルーティングポリシーがある。

### シンプルルーティングポリシー
標準的な 1:1 のルーティング。

### フェイルオーバールーティングポリシー
アクティブ / スタンバイ方式
ヘルスチェックに失敗した場合、スタンバイ側のシステムへルーティングする。
障害時に Soryy サーバーの Sorry コンテンツを表示させることができる。

### 位置情報ルーティングポリシー
ユーザーの位置情報に基づいたルーティング。
日本からのアクセスは日本語のコンテンツを表示させることが可能。

### 地理的近接性ルーティングポリシー
リソースの場所に基づいたルーティング。

### レイテンシールーティングポリシー
複数箇所にサーバーが分散されて配置されている場合に、遅延が最も少ないサーバーにルーティングする。
負荷の分散が可能。

### 複数値回答ルーティングポリシー
一つのレコードに異なる IP アドレスを複数登録して、ランダムに返却する。
ヘルスチェックが NG となったアドレスは返却されない。

### 加重ルーティングポリシー
指定した比率で複数のリソースのルーティングする。
拠点をまたがってリソースの異なるサーバーが配置されている場合にリクエスト比率を調整できる。
AB テストで一部ユーザーを誘導するということも可能。

## トラフィックフロー
ルーティングポリシーを組み合わせることで様々なルーティング環境を構築できるが、各レコード間の設定が複雑化することになる。
それらの組み合わせをビジュアル的にわかりやすく組み合わせるツールを定義できる。

## DNS フェイルオーバー
Route53 が持つフォールトトレラントアーキテクチャ

### フォールトトレラントアーキテクチャ
システムに以上が生じても被害を宰相に抑えるための仕組み。
