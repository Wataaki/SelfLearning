# AWS OpsWorks
**Chef** を利用した構成管理サービス。  
Chef は**レシピ**と呼ばれるファイルにサーバーの構成を定義し、ミドルウェアのインストールや設定を自動化するツール。  
Chef の利用方式は以下の 2 種類がある。  
- ChefClient ローカル方式  
  各サーバーがレシピを持ち、自分自身にレシピを適用する方式。  
- ChefServer/Client 方式  
  マスターサーバーを用意し、レシピそのものや各サーバーへのレシピ適用状況を管理する方式。  

## OpsWorks スタック
ChefClient ローカル方式を利用する場合は OpsWorks スタックを利用する。  
- スタック  
  OpsWorks のトップエンティティ。  
  スタック単位の構成情報を JSON 形式で保持する。スタックの下に複数のレイヤーを定義できる。  
- レイヤー  
  インスタンスの特性ごとにレイヤーを用意する。  
  レイヤーに対して Chef レシピをマッピングする。  
  レイヤーを指定して EC2 インスタンスを起動することで、インスタンスに対してレシプが適用される。  

スタックをコピーすることもできるので、作成した環境を別リージョンにコピーすることもできる。  
レイヤー内で起動した EC2 インスタンスには OpsWorks エージェントがインストールされている。  

## OpsWorks for ChefAutomate
ChefServer/Client 方式で利用する場合。  
Chef には **ChefAutomate** という Chef を統合的に利用するための機能がある。  
